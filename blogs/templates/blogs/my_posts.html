{% extends "blogs/base.html" %}
{% load bootstrap4 %}
{% block header %}
<h2>Posts</h2>
{% endblock header %}

{% block content %}
    {% if request.user.id != None %}
    <a href="{% url 'blogs:new_post' %}" class="btn btn-dark" role="button">Add a new post</a>
    {% endif %}

  {% for post in owner_page.object_list %}
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4>
          {{ post.date_added|date:'M d, Y H:i' }}
          {% if post.owner.id == request.user.id %}
            <a href="{% url 'blogs:new_post' %}" class="btn btn-secondary" role="button">Add a new post</a>
          {% endif %}
        </h4>
        <h4>
        Author: {{ post.owner }}
        </h4>
      </div>
      <div class="panel-body">
        <h4>{{ post.title|linebreaks }}</h4>
        {{ post.text|linebreaks }}

        {% if post.image %}
          <img src="{{ post.image.url }}">
        {% endif %}

      </div>
    </div> <!-- panel -->
  {% empty %}
    No posts have been added yet.
  {% endfor %}

  <nav aria-label="...">
    <ul class="pagination">
      <li class="page-item {% if not prev_owner_page_url %} disabled {% endif %}">
       <a class="page-link" href="{{ prev_owner_page_url }}" tabindex="-1" aria-disabled="true">Previous</a>
      </li>

      {% for n in owner_page.paginator.page_range %}
        {% if owner_page.number == n %}
          <li class="page-item active" aria-current="page">
            <a class="page-link" href="?page={{ n }}">{{ n }}<span class="sr-only">(current)</span></a>
          </li>
        {% elif n > owner_page.number|add:-3 and n < owner_page.number|add:3 %}
          <li class="page-item"><a class="page-link" href="?page={{ n }}">{{ n }}</a></li>
        {% endif %}
      {% endfor %}

      <li class="page-item {% if not next_owner_page_url %} disabled {% endif %}">
        <a class="page-link" href="{{ next_owner_page_url }}">Next</a>
      </li>
    </ul>
  </nav>
{% endblock content %}